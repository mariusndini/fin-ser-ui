<!doctype html>
<html lang="en">
  <head>
    <title>Market Advantage (Demo app)</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.3.1/d3.min.js" integrity="sha512-9H86d5lhAwgf2/u29K4N5G6pZThNOojI8kMT4nT4NHvVR02cM85M06KJRQXkI0XgQWBpzQyIyr8LVomyu1AQdw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js" integrity="sha512-HjKxWye8lJGPu5q1u/ZYkHlJrJdm6KGr89E6tOrXeKm1mItb1xusPU8QPcKVhP8F9LjpZT7vsu1Fa+dQywP4eg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-collection/1.0.5/d3-collection.min.js" integrity="sha512-wYLIhsNaJ6cBEcFIgAtY0ncVV3KEzE95+32OfOdQJQkEfZVrWOn+N2woUPaBCuW8N6S7++72Y7XlOPZ/3U7X2w==" crossorigin="anonymous"></script>
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/bootstrap-slider.min.js" integrity="sha512-f0VlzJbcEB6KiW8ZVtL+5HWPDyW1+nJEjguZ5IVnSQkvZbwBt2RfCBY0CBO1PsMAqxxrG4Di6TfsCPP3ZRwKpA==" crossorigin="anonymous"></script>
    
    <!-- <script src='../js/jquery.js'></script> -->
    <script src='../js/jquery.sparkline.js'></script>
    <script src='../js/snowflakeWrapper.js'></script>
    <script src='../js/ui.js'></script>
    <script src='../js/treemap.js'></script>
    <script src='../js/profile.js'></script>
    <!-- <script src='../js/alpaca.js'></script> -->
    <script src='../js/ui-sparkline.js'></script>
    <script src='../js/ui-candlestick.js'></script>
    <script src='../js/ui-screener.js'></script>
    <script src='../js/ui-portfolio-breakdown.js'></script>
    <script src='../js/ui-modal.js'></script>
    <script src='../js/creds.js'></script>
    <script src='../js/ui-supplier.js'></script>
    <script src='../js/ui-showAsset.js'></script>
    <script src='../js/ui-leaderboard.js'></script>
    <script src='../js/ui-map.js'></script>
    <script src='../js/bitcoin.js'></script>
    <script src='../js/polygon.js'></script>
    <script src='../js/ui-top-predict.js'></script>

    <style>
      .modebar{
        display: none !important;
      }

      .modal-content{
        background-color: #202020;
        color: white;
      }
    </style>

    <script>
      //localStorage.removeItem("gbl");
      var shwProfile = true;
      if(localStorage.getItem("gbl") == null){
        var gbl = {};
        gbl.portfolio = []
        gbl.sfconn = null;
        gbl.candleCompare = []
        gbl.portCompare = []
        gbl.portUUID = 0
        gbl.uuid = generateGuid();
      }else{
        shwProfile = false;
        gbl = JSON.parse(localStorage.getItem("gbl"));
      }
      
      var PersonalAcct = snowflake.createConnection(config.snowflake);
      var IndustryAcct = snowflake.createConnection(config.industry);
      var SparklineAcct = snowflake.createConnection(config.sparkline);

      //connect to personal account
      connect(PersonalAcct).then((conn)=>{          
          //connect to Industry account
          connect(IndustryAcct).then((indConn)=>{
            gbl.indconn = indConn;
            getSandPSparkline();
            initUI();
            if(shwProfile){
              showProfile(); 
            }else{
              showScreenr();
            }
            //connect to Snowflake account for sparklines (Uses different WHs)
            connect(SparklineAcct).then((sparkConn)=>{
              gbl.sparkConn = sparkConn;
            })

          })//end original connection

          gbl.sfconn = conn;
          return;
      });

    </script>


    <style>
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      html {
          height: 100%;
      }
      .snowbutton{
        font-weight: bold;
      }
    </style>

  </head>

  <body style='background-color: black; color:white;' >
    <!-- BOTTOM SCROLL NEWS FEED BAR -->
    <div style='background-color: black;position: absolute; bottom: 0; width: 100%;height: 25px;z-index: 999;border-top: 1px ridge #555;'>
      <div style='color: white; background-color: black; z-index: 999; padding-right: 10px; padding-left:10px; position:absolute;border-right: 2px solid #898e8c;'><b>S&P500</b></div>
      <marquee scrollamount="5" behavior="scroll" onmouseover="this.stop()" onmouseout="this.start()" direction="left" id='trends-marquee'></marquee>
    </div>

    <div style='background-color: rgb(232, 232, 232);position: absolute; bottom: 25px; width: 100%;height: 25px;z-index: 999;border-top: 1px ridge #555;'>
      <div style='color: black; background-color: rgb(232, 232, 232); z-index: 999; padding-right: 8px; padding-left:10px; position:absolute;border-right: 2px solid #898e8c;'><b>QQQ100</b></div>
      <marquee scrollamount="7" behavior="scroll" onmouseover="this.stop()" onmouseout="this.start()" direction="left" id='QQQ-marquee'></marquee>
    </div>


    <div class="d-md-flex h-100 align-items-center">
      <!-- First Half - LEFT SIDE BAR-->
      <div class="col-md-2 p-0 h-100">
          <div class="text-white d-md-flex text-center justify-content-center">
            
            <div class="w-100">
              <br><h3>Market Advantage</h3>
              <div class="btn-group dropright w-100">
                <button type="button" class="btn btn-primary dropdown-toggle text-right snowbutton" data-toggle="dropdown" style='border-radius: 0px;border-color: black;'  aria-haspopup="true" aria-expanded="false">Menu üì∫ </button>
                <div class="dropdown-menu" x-placement="right-start" style="position: absolute; transform: translate3d(111px, 0px, 0px); top: 0px; left: 0px; will-change: transform;">
                  <a class="dropdown-item" href="#" onclick="showLeaderboard()">Fund Portfolios</a>
                  <a class="dropdown-item" href="#" data-toggle="modal" data-target="#predictMainModal">üîÆ Predict</a>
                  <a class="dropdown-item" href="#" onclick="showBitcoin();openSocket()">Bitcoin Stream</a>
                  <a class="dropdown-item" href="#" onclick="showProfile()">Profile</a>
                </div>
              </div>


              <div class="btn-group dropright w-100">
                <button type="button" class="btn btn-primary text-right snowbutton"style='border-radius: 0px;border-color: black;' onclick="showScreenr()">Screener üëÄ</button>
              </div>


              <!-- Heat Map button -->
              <div class="btn-group dropright w-100">
                <button type="button" class="btn btn-primary dropdown-toggle text-right snowbutton" data-toggle="dropdown" style='border-radius: 0px;border-color:black' aria-haspopup="true" aria-expanded="false">Index Maps üó∫</button>
                <div class="dropdown-menu" x-placement="right-start" style="position: absolute; transform: translate3d(111px, 0px, 0px); top: 0px; left: 0px; will-change: transform;">
                  <a class="dropdown-item" href="#" onclick="S_P_500()">S&P 500</a>
                  <a class="dropdown-item" href="#" onclick="Nasdaq_QQQ()">NASDAQ</a>
                  <a class="dropdown-item" href="#" onclick="DJI()">Dow Jones (DJI)</a>
                </div>
              </div>

              <!-- Screener button -->
              <br>
              <div class="btn-group dropright w-100">
                <button type="button" class="btn btn-primary dropdown-toggle text-right snowbutton"data-toggle="dropdown" style='border-radius: 0px;border-color: black;' aria-haspopup="true" aria-expanded="false">My Portfolios üíº</button>
                <div id='portfolio-dropdown' class="dropdown-menu" x-placement="right-start" style="position: absolute; transform: translate3d(111px, 0px, 0px); top: 0px; left: 0px; will-change: transform;">
                  
                  <div class="input-group mb-5">
                    <input type="text" class="form-control" id='new-port-input' placeholder="New Portfolio Name"  aria-describedby="basic-addon1">
                    <button type="button" class="btn btn-dark" onclick='make_portfolio($("#new-port-input").val())'>üëç</button>
                  </div>
                  <div class="dropdown-divider"></div>
                  
                  <a class="dropdown-item text-right snowbutton" href="#" onclick="showAllPortfolios()"><strong>Show All</strong></a>
                </div>
              </div>
            </div>
          </div>

          <div class="btn-group dropright w-100">
            <button type="button" class="btn btn-primary text-right snowbutton" style='border-radius: 0px;border-color: black;' data-toggle="modal" data-target="#archModal">Architecture üåÜ</button>
          </div>
          
       
          <!-- SIDE BARS -->
          <br><br>

          <div id='screener-side-bar' class="w-100 text-center justify-content-center">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">Ticker</span>
              </div>
              <input type="text" class="form-control" placeholder="Ticker" maxlength="20" aria-label="Ticker" id='ticker-input' style="text-transform:uppercase" aria-describedby="basic-addon1">
              <button type="button" class="btn btn-success" onclick="showScreenr()">go</button>
            </div>


            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <label class="input-group-text" for="exchange-input-select">Economy</label>
              </div>
              <select class="custom-select" id="exchange-input-select" onchange="showScreenr();getSector();">
                <option selected>All</option>
                
              </select>
            </div>

              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="sector-input-select">Sector</label>
                </div>
                <select class="custom-select" id="sector-input-select" onchange="showScreenr();getIndustry()">
                  <option selected>All</option>
                </select>
              </div>

              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="industry-input-select">Industry</label>
                </div>
                <select class="custom-select" id="industry-input-select" onchange="showScreenr()">
                  <option selected>All</option>
                  
                </select>
              </div>

              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="mc-start-input-select">cap</label>
                </div>
                <select class="custom-select" id="mc-start-input-select" onchange="showScreenr()">
                  <option selected>0</option>
                  <option>100</option>
                  <option>200</option>
                  <option>300</option>
                  <option>400</option>
                  <option>500</option>
                  <option>600</option>
                  <option>700</option>
                  <option>800</option>
                  <option>900</option>
                  <option>1000</option>
                  <option>1100</option>
                  <option>1200</option>
                  <option>1300</option>
                  <option>1400</option>
                  <option>1500</option>
                  <option>1600</option>
                  <option>1700</option>
                  <option>1800</option>
                  <option>1900</option>
                  <option>2000</option>
                  <option>2100</option>
                  <option>2200</option>
                  <option>2300</option>
                  <option>2400</option>
                  <option>2500</option>
                  <option>2600</option>
                  <option>2700</option>
                  <option>2800</option>
                  <option>2900</option>
                  <option>3000</option>
                </select>
                <div class="input-group-prepend">
                  <label class="input-group-text" for="mc-start-input-select">-</label>
                </div>
             
                <select class="custom-select" id="mc-end-input-select" onchange="showScreenr()">
                  <option>100</option>
                  <option>200</option>
                  <option>300</option>
                  <option>400</option>
                  <option>500</option>
                  <option>600</option>
                  <option>700</option>
                  <option>800</option>
                  <option>900</option>
                  <option>1000</option>
                  <option>1100</option>
                  <option>1200</option>
                  <option>1300</option>
                  <option>1400</option>
                  <option>1500</option>
                  <option>1600</option>
                  <option>1700</option>
                  <option>1800</option>
                  <option>1900</option>
                  <option>2000</option>
                  <option>2100</option>
                  <option>2200</option>
                  <option>2300</option>
                  <option>2400</option>
                  <option>2500</option>
                  <option>2600</option>
                  <option>2700</option>
                  <option>2800</option>
                  <option>2900</option>
                  <option selected>3000</option>
                </select>

              </div>

              

          </div><!-- END SIDE BAR-->

          <div id='indicies-side-bar' class="w-100 text-center justify-content-center">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="market-open-cb" onclick='getTreeMap()'>
              <label class="form-check-label" for="market-open-cb">Scale to Change</label>
            </div>
            
          </div>

          <div class="w-100 text-center justify-content-center">
            
          </div>

      </div>
      
      <!-- Second Half - BODY OF APP -->
      <div class="col-md-10 p-0 h-100">
        <!-- Tree Map in the UI -->
        <div id='treeDiv' style="height:93%;width:100%">
          <svg id="treeMap" style="height:100%;width:100%"></svg>
        </div> 

        <!-- Screener Div in the UI -->
        <div id='screenrDiv' style="height:93%;width:100%;overflow:scroll"></div> 

        <!-- all portfolios div -->
        <div id='all-ports-Div' style="height:93%;width:100%;overflow:scroll"></div> 

        <!-- show leader board-->
        <div id='all-leaderboard' style="height:93%;width:100%;overflow:scroll">
          <div style='height:40%;overflow: scroll;'>
            <table class='table table-sm table-dark table-hover'>
              <thead>
                <tr>
                  <th class="text-center">üìõ<br>Name</th>
                  <th class="text-center">üë©‚Äçüíª<br>Manager</th>
                  <th class="text-center">üí∞<br>Purchase Value</th>
                  <th class="text-center">üè∑<br>Market Value</th>
                  <th class="text-center">üí∞<br>P/L</th>
                  <th class="text-center">‚öñ<br>%</th>
                </tr>
              </thead>
              <tbody id='leaderboard-table' style='background-color: black;'></tbody>
            </table>
          </div>

          <div class="container-fluid">
            <div class="row">
              <div class="col-md-8 text-center">
                <table class='table table-sm table-dark'>
                  <tr>
                    <td>
                      <b>Fund vs SPY</b>
                    </td>
                  </tr>
                
                  <tr style='background-color:black'>
                    <td>
                      <div id="fund-perf-chart" style='background-color:black; width: 100%;'></div>
                    </td>
                  </tr>
                  
                </table>
              </div>

              <div class='col-md-4 text-center' style='height:450px;overflow-y: scroll'>
                <div style='height:100%;'>
                  <table class='table table-sm table-dark table-hover'>
                    <thead>
                      <tr><td colspan=4><b>Top Holdings</b></td></tr>
                      <tr>
                        <th class="text-center">üìõ<br>Asset</th>
                        <th class="text-center">üè∑<br>Units</th>
                        <th class="text-center">üíº <br>Count</th>
                        <th class="text-center">üí∞ <br>PMV</th>
                      </tr>
                    </thead>
                    <tbody id='lb-asset-table' style='background-color: black;'></tbody>
                  </table>
                </div>

              </div>
            </div>
          </div>


        </div> 


        <!-- individual portfolio -->
        <div id='indi-ports-Div' style="height:93%;width:100%;overflow:scroll">
          <br>
          <h1 id='portfolio-close-btn' onclick="showAllPortfolios()" style='color:red'>üÖß</h1>
          <h1 id='portfolio-id-in-div'>üíº-</h1><br>
          
          <button type="button" class="btn btn-light" data-toggle="modal" data-target="#portPerfModal">üé≠ Performance</button>
          <button type="button" class="btn btn-light" data-toggle="modal" data-target="#portSupplierModal">üè≠ Suppliers</button>
          <button type="button" class="btn btn-light" data-toggle="modal" data-target="#portRevModal">üåé Geo-Revenue</button>
          <button type="button" class="btn btn-light" data-toggle="modal" data-target="#BurevModal">üóì Segment Rev</button>

          <table class='table table-sm table-dark'>
            <thead>
              <tr>
                <th class="text-center">üé´<br>Symbol</th>
                <th class="text-center">‚è∞<br>Purchase Time</th>
                <th class="text-center">üîñ<br>Purchase Price</th>
                <th class="text-center">üè∑<br>Current Price</th>
                <th class="text-center">‚öñ<br>Units</th>
                <th class="text-center">üí∞<br>Cost</th>
                <th class="text-center">üí∞<br>FMV</th>
                <th class="text-center">íàü<br>Profit/Loss</th>
                <th class="text-center">üìà<br>%</th>
              </tr>
            </thead>
            <tbody id='port-tbody' style='background-color: black;'></tbody>
          </table>

        </div> 



        
        <!-- show assets div -->
        <div id='show-asset-div' style="height:93%;width:100%;overflow:scroll">
          <br>
          
          <div class="container-fluid">
            <div class="row">
              <div class="col">
                <span onclick="closeAssetPage();" style='color:red; font-size: 40px;'>üÖß</span>
                <span style='font-size: 40px;' id='asset-ticker'></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span style='font-size: 30px;' id='show-asset-name'></span><br>
                <div style='height:50px;overflow: scroll;width:100%;'>
                    <span style='font-size: 16px;line-height:2px;' id='show-asset-desc'></span>
                </div>
              </div>
              <br>
              <div class='col-xs-4'>
                  <div class="btn-group dropdown w-100" style='width:100px'>
                    <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                    <div id='asset-add-dropdown' class="dropdown-menu" x-placement="down-start" style="position: absolute; transform: translate3d(111px, 0px, 0px); top: 0px; left: 0px; will-change: transform; width:350px">
                    </div>
                  </div>
                </div><!--end cols-->
            </div>

            <div class="row">
              <div class="col">
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#supplierModal">üè≠ Suppliers</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#GeorevModal">üåé Geo-Revenue</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#BurevModal">üóì Segment Rev</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#newsModal">üóû News</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#cpiModal"> üìäCPI</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#predictModal">üîÆ Predict</button>
                <button type="button" class="btn btn-light" data-toggle="modal" data-target="#existingPortsModal" id='exist-port-btn'>üíº Portfolios</button>


              </div>
            </div>

            <div class="row">
                <div class="col">
                  <table class='table table-sm table-dark' style='width:100%'>
                    <thead>
                      <tr>
                        <th>üèõ Economy</th>
                        <th>üè≠ Industry</th>
                        <th>ëÖÄ Sector</th>
                        
                        <th>üí∞ Market Cap</th>
                        <th>ùå° %Change</th>
                        <th>‚ÜîÔ∏è VWAP</th>
                        <th>üíπ Volume</th>
                      </tr>
                  </thead>
      
                  <tbody style='background-color:black'>
                    <tr>
                      <td id='asset-table-exchange'>-</td>
                      <td id='asset-table-industry'>-</td>
                      <td id='asset-table-sector'>-</td>
                      
                      <td id='asset-table-mktcap'>-</td>
                      <td id='asset-table-open'>-</td>
                      <td id='asset-table-range'>-</td>
                      <td id='asset-table-volume'>-</td>
                    </tr>
                    <tbody>
                  </table>
                </table>

                <table class='table table-sm table-dark' style='width:100%'>
                    <tr>
                        <th>Revenue</th>
                        <th>OpEx</th>
                        <th>Income</th>
                        <th>COGS</th>
                        <th>EPS</th>
                        <th>Debt</th>
                        <th>Div/Share</th>
                        <th id='esg-spark'>ESG</th>
                    </tr>
                    <tr style='background-color:black'>
                      <td id='asset-table-rev-spark'>-</td>
                      <td id='asset-table-opex-spark'>-</td>
                      <td id='asset-table-income-spark'>-</td>
                      <td id='asset-table-eps-spark'>-</td>
                      <td id='asset-table-cogs-spark'>-</td>
                      <td id='asset-table-debt-spark'>-</td>
                      <td id='asset-table-div-spark'>-</td>
                      <td id='asset-table-esg-spark'>-</td>
                    </tr>
                  </table>
                  <br>
                                  
                </div>
                
        </div>
      </div>

      <div class="container-fluid">
        <div class="row">
          <div class="col-xs-6">
            
            <div class="input-group sm-2" id='add-compare-input-area'>
              <input type="number" class="form-control input-sm" value='365' maxlength="3" id='chart-set-days' aria-describedby="basic-addon1" style='width:100px;'>
              <button type="button" id='add-trace-btn' class="btn btn-success btn-sm" onclick="chartSetDays($('#chart-set-days').val());">Days</button>&nbsp;

              <input type="text" class="form-control input-sm" placeholder="Ticker" maxlength="10" id='candle-ticker-input' style="text-transform:uppercase;width:100px;" aria-describedby="basic-addon1">
              <button type="button" id='add-trace-btn' class="btn btn-success btn-sm" onclick="addTraceToCandle($('#candle-ticker-input').val().toUpperCase());$('#candle-ticker-input').val('')">add</button>&nbsp;&nbsp;&nbsp;

              <div id='add-compare-input-area-pills'></div>
            </div>

          </div>
        </div>

        <div class="row">
            <div class="col-md-12" style='padding:0px'>
              <div id="asset-candle-container" style='background-color:black; width: 100%;'></div>
            </div>

  
              <!-- SUPPLIER-TABLE  -->
              <!-- <div class="col-xs-6">
              </div> -->

        </div>
        
       
    </div>  
    

  
    </div>


    <!-- individual portfolios div -->
    <div id='portfolio-assets-div' style="height:93%;width:100%;overflow:scroll"></div> 

    <!-- Bitcoin stream div -->
    <div id='bitcoin-div' style="height:93%;width:100%;overflow:scroll" class='text-center'>

      <div>
        <H1>Bitcoin Trade Stream</H1>
      </div>

      <table class="table table-sm table-dark">
        <tr>
          <td style='width:20%'>Asset</td>
          <td style='width:20%'>Trade Time</td>
          <td style='width:20%'>Price</td>
          <td style='width:20%'>Quantity</td>
          <td style='width:20%'>$ Value</td>
        </tr>
        <tr id='btc-trade'></tr>
      </table>

      <div class="col-md-12">
        <div id="btc-candle-container" style='background-color:black; width: 100%;'></div>
      </div>

      
    
    </div> <!-- END BTC PORTION-->


    <!-- Profile Div in the UI -->
    <div id='profileDiv' class="text-white text-center align-items-center justify-content-center" style="height:100%;width:100%;overflow:scroll">
      <h1>My Profile</h1>
      <p>Find your profile information below.</p>
      <br>
      
      <div style='display:none;'>
        <h4>Internal ID</h4>
        <h5 id='user-id-profile'>--</h5>
      </div>

      <div class='form-row justify-content-center'>
        <div class="input-group" style='width:450px'>
          <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon1">User Tag @</span>
          </div>
          <input type="text" class="form-control" placeholder="User Tag" maxlength="30" aria-label="user-tag" id='user-tag-input' aria-describedby="basic-addon1">
          <button type="button" class="btn btn-warning" onclick="setUserTag($('#user-tag-input').val())">Set</button>
        </div>
      </div>
      <p>Please note changing this will reset all your portfolios.</p>

      <br>

      <h4>Portfolio(s)</h4>
      <p>Below are your portfolios. Delete/Create as necessary. 
        <br>You can create new ones by going to <b>My Portfolios</b> or below
        <div class='form-row justify-content-center'>
          <div class="input-group mb-5" style='width:450px'>
            <input type="text" class="form-control" id='new-port-input-profile' placeholder="New Portfolio Name"  aria-describedby="basic-addon1">
            <button type="button" class="btn btn-dark" onclick='make_portfolio($("#new-port-input-profile").val())'>üëç</button>
          </div>
        </div>
      <div id='portfolio-dropdown-profile'></div>

      <br><br><br><br>


    </div>
  </div> 

</div>


</div>





<!-- MODAL DIVS BELOW  -->
<div>

<!-- SELL MODAL -->
<div class="modal fade" id="sellModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sell-modal-title">Sell Asset</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="input-group mb-3">
          <input type="number" class="form-control" id='port-units-sell-input' placeholder="Units" min="1" max="5" aria-describedby="basic-addon1">
          <!-- <button type="button" class="btn btn-dark" onclick='alert()'>üëç</button> -->
        </div>

        <table class="table table-sm table-dark">
          <thead>
            <tr>
              <th scope="col">Purchase</th>
              <th scope="col">Current</th>
              <th scope="col">Units</th>
              <th scope="col">+/-</th>
              <th scope="col">PnL</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id='sell-modal-purchase'>-</td>
              <td id='sell-modal-current'>-</td>
              <td id='sell-modal-units'>-</td>
              <td id='sell-modal-plus'>-</td>
              <td id='sell-modal-pnl'>-</td>
            </tr>
          </tbody>
        </table>
        <h4 id="modalSellDollarValue">$-</h4>


      </div>
      <div class="modal-footer" id='modal-footer-buttons'>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <!-- <button type="button" class="btn btn-primary" id="modelSellBtn">Sell</button> -->
        <script>
            $("#sellModal").on("hidden.bs.modal", function () {
              $('#modelSellBtn').remove();
            });
        </script>
      </div>

    </div>
  </div>
</div>


<!-- SUPPLIER MODAL -->
<div class="modal fade" id="supplierModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Suppliers</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>
        <svg id="supp-map-viz" width="800" height="300"></svg>

        <table class="table table-sm table-dark">
          <thead>
            <tr>
              <th scope="col">Entity ID</th>
              <th scope="col">Name</th>
              <th scope="col">Country</th>
              <th scope="col">Type</th>
              <th scope="col">Rev-%</th>
              <th scope="col"></th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id='ticker-supplier-table' style='background-color: black;'></tbody>
        </table>



      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>


<!-- GeorevModal MODAL -->
<div class="modal fade" id="GeorevModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Geo Revenue</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>
        <svg id="supplier-map-viz" width="800" height="300"></svg>

        <table class="table table-sm table-dark">
          <thead>
            <tr>
              <th scope="col">Country</th>
              <th scope="col">Rank</th>
              <th scope="col">Class</th>
              <th scope="col">Rev%</th>
            </tr>
          </thead>
          <tbody id='ticker-georev-table' style='background-color: black;'></tbody>
        </table>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>




<!-- GeorevModal MODAL -->
<div class="modal fade" id="portRevModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Portfolio Revenue by Geo</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>
        <svg id="port-rev-map-viz" width="800" height="300"></svg>

        <table class="table table-sm table-dark">
          <thead>
            <tr>
              <th scope="col">Country</th>
              <th scope="col">Percent</th>
              <th scope="col">Revenue ($.M)</th>
            </tr>
          </thead>
          <tbody id='port-georev-table' style='background-color: black;'></tbody>
        </table>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>


<!-- GeorevModal MODAL -->
<div class="modal fade" id="portSupplierModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Suppliers by Country for Portfolio</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>
        <svg id="port-supp-map-viz" width="800" height="300"></svg>

        <table class="table table-sm table-dark">
          <thead>
            <tr>
              <th scope="col">Country</th>
              <th scope="col">Supplier Count</th>
              <th scope="col">Supplier %</th>
            </tr>
          </thead>
          <tbody id='port-geosupp-table' style='background-color: black;'></tbody>
        </table>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>


<!-- PORT PERF MODAL -->
<div class="modal fade" id="portPerfModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >üé≠ Portfolio Performance</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

        <div class="modal-body" id='supplier-modal-body'>
          <div class="container-fluid">
            <div class="row">
              <div class="col-xs-4">
              <div class="input-group sm-2" id='add-compare-input-port'>
                <input type="date" class="form-control input-sm" onchange="port_date_change()" placeholder="AS OF" id='port-datetime-input' aria-describedby="basic-addon1">

                <input type="text" class="form-control input-sm" placeholder="Ticker" maxlength="10" id='port-ticker-input' style="text-transform:uppercase; " aria-describedby="basic-addon1">
                <button type="button" id='add-trace-btn' class="btn btn-success btn-sm" onclick="addTraceToPort($('#port-ticker-input').val().toUpperCase());$('#port-ticker-input').val('')">add</button>&nbsp;&nbsp;&nbsp;
                <div id='port-compare-input-area-pills'></div>
              </div>
              </div>
            </div>
        </div>

        <div id="port-perf-chart" style='background-color:black; width: 100%;'></div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>



<!-- ARCHITECTURE MODAL existingPortsModal-->
<div class="modal fade" id="archModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Snowflake - App Architecture</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>
        <div class="text-center">
          <img src="imgs/arch.png" style='width:100%' class="rounded" alt="Arch">
        </div>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>


<!-- EXISTING PORTS MODAL -->
<div class="modal fade" id="existingPortsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Asset in Portoflios</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='supplier-modal-body'>

        <table class='table table-sm table-dark' style='width:100%'>
          <thead>
            <tr><th colspan="4">Existing Portfolios</th></tr>
            <tr>
              <th>üé´ Name</th>
              <th>üè≠ Units</th>
              <th>ëÖÄ PMV</th>
            </tr>
          </thead>

          <tbody id='asset-existing-port' style='background-color:black'><tbody>
        </table>

        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>



<!-- EXISTING PORTS MODAL -->
<div class="modal fade" id="newsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >News</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='news-modal-body'>

        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>



<!-- PCI MODAL -->
<div class="modal fade" id="cpiModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Consumer Price Index</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='CPI'>
 
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="cpi-country">Country Code</label>
          </div>
          <select class="custom-select" id="cpi-country" onchange="getCPI()">
            <option selected>United States</option><option>Argentina</option><option>Australia</option><option>Austria</option><option>Bahrain</option><option>Bangladesh</option><option>Belarus</option><option>Belgium</option><option>Bolivia</option><option>Brazil</option><option>Bulgaria</option><option>Canada</option><option>Chile</option><option>China</option><option>Colombia</option><option>Costa Rica</option><option>Croatia</option><option>Cyprus</option><option>Czech Republic</option><option>Denmark</option><option>Dominican Republic</option><option>Ecuador</option><option>Egypt</option><option>El Salvador</option><option>Estonia</option><option>Finland</option><option>France</option><option>Germany</option><option>Greece</option><option>Hong Kong</option><option>Hungary</option><option>Iceland</option><option>India</option><option>Indonesia</option><option>Ireland</option><option>Italy</option><option>Jamaica</option><option>Japan</option><option>Jordan</option><option>Kazakhstan</option><option>Kuwait</option><option>Latvia</option><option>Lithuania</option><option>Luxembourg</option><option>Malaysia</option><option>Malta</option><option>Mexico</option><option>Morocco</option><option>Netherlands</option><option>New Zealand</option><option>Nicaragua</option><option>Nigeria</option><option>Norway</option><option>Pakistan</option><option>Panama</option><option>Paraguay</option><option>Peru</option><option>Philippines</option><option>Poland</option><option>Portugal</option><option>Qatar</option><option>Romania</option><option>Russian Federation</option><option>Saudi Arabia</option><option>Singapore</option><option>Slovakia</option><option>Slovenia</option><option>South Africa</option><option>South Korea</option><option>Spain</option><option>Sri Lanka</option><option>Sweden</option><option>Switzerland</option><option>Taiwan</option><option>Thailand</option><option>Tunisia</option><option>Turkey</option><option>Ukraine</option><option>United Arab Emirates</option><option>United Kingdom</option><option>Uruguay</option><option>Venezuela</option><option>Vietnam</option>
          </select>
        </div>

        <div id="cpi-chart" style='background-color:black; width: 100%;'></div>

        <table class='table table-sm table-dark' style='width:100%'>
          <thead>
            <tr>
              <th class="text-right">Date</th>
              <th class='text-left'>Value</th>
            </tr>
          </thead>

          <tbody id='cpi-port' style='background-color:black'><tbody>
        </table>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>




<!-- BurevModal MODAL -->
<div class="modal fade" id="BurevModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Revenue by Busness Segment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='CPI'>
 
        <table class='table table-sm table-dark' style='width:100%'>
          <thead>
            <tr>
              <th class="text-right">Business Segment</th>
              <th class='text-left'>Rev Pct</th>
            </tr>
          </thead>

          <tbody id='bu-rev' style='background-color:black'><tbody>
        </table>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>


<!-- PREDICT MODAL -->
<div class="modal fade" id="predictModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Price Prediction</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
 
        <table class='table table-sm table-dark' style='width:100%'>
          <thead>
            <tr>
              <th class="text-right">Date</th>
              <th class='text-right'>Open</th>
              <th class='text-right'>Forecast</th>
              <th class='text-right'>Actual Open</th>
            </tr>
          </thead>

          <tbody id='price-predict' style='background-color:black'><tbody>
        </table>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>



<!-- PREDICT MODAL -->
<div class="modal fade" id="predictMainModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Top Predicted Assets</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div style='width:50%'>
          <div class="input-group sm-2" id='add-compare-input-area'>
            $<input type="number" class="form-control input-sm" value='1000000' maxlength="15" id='init-investment' aria-describedby="basic-addon1" style='width:100px;'>
            <select class="custom-select" id="top-x-assets" >
              <option selected>10</option>
              <option>15</option>
              <option>20</option>
              <option>30</option>
              <option>35</option>
              <option>40</option>
              <option>45</option>
              <option>50</option>
            </select>
            
            <button type="button" class="btn btn-success btn-sm" onclick="getTopPredict();">Forecast</button>&nbsp;&nbsp;&nbsp;


          </div>
        </div>

        <div id="forecast-chart" style='background-color:black; width: 100%;'></div>

        <table class='table table-sm table-dark' style='width:100%'>
          <thead>
            <tr>
              <th class="text-right">Date</th>
              <th class="text-right">Asset</th>
              <th class='text-right'>Investment</th>
              <th class='text-right'>Forecast PnL</th>
              <th class='text-right'>Actual PnL</th>
            </tr>
          </thead>

          <tbody id='price-predict-main' style='background-color:black'><tbody>
        </table>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">üëç</button>
      </div>
    </div>
  </div>
</div>







</div><!-- end modal div-->





    
  </body>
</html>


